import{R as x,g as M,r as W,j as g}from"./index-5e2546b7.js";const i=1,C=2,F=4,f=8,O=16,S=32,v=64,P={a:{content:i|f,self:!1,type:i|f|S|v},address:{invalid:["h1","h2","h3","h4","h5","h6","address","article","aside","section","div","header","footer"],self:!1},audio:{children:["track","source"]},br:{type:i|f,void:!0},body:{content:i|C|F|f|O|S|v},button:{content:f,type:i|f|S|v},caption:{content:i,parent:["table"]},col:{parent:["colgroup"],void:!0},colgroup:{children:["col"],parent:["table"]},details:{children:["summary"],type:i|S|v},dd:{content:i,parent:["dl"]},dl:{children:["dt","dd"],type:i},dt:{content:i,invalid:["footer","header"],parent:["dl"]},figcaption:{content:i,parent:["figure"]},footer:{invalid:["footer","header"]},header:{invalid:["footer","header"]},hr:{type:i,void:!0},img:{void:!0},li:{content:i,parent:["ul","ol","menu"]},main:{self:!1},ol:{children:["li"],type:i},picture:{children:["source","img"],type:i|f|O},rb:{parent:["ruby","rtc"]},rp:{parent:["ruby","rtc"]},rt:{content:f,parent:["ruby","rtc"]},rtc:{content:f,parent:["ruby"]},ruby:{children:["rb","rp","rt","rtc"]},source:{parent:["audio","video","picture"],void:!0},summary:{content:f,parent:["details"]},table:{children:["caption","colgroup","thead","tbody","tfoot","tr"],type:i},tbody:{parent:["table"],children:["tr"]},td:{content:i,parent:["tr"]},tfoot:{parent:["table"],children:["tr"]},th:{content:i,parent:["tr"]},thead:{parent:["table"],children:["tr"]},tr:{parent:["table","tbody","thead","tfoot"],children:["th","td"]},track:{parent:["audio","video"],void:!0},ul:{children:["li"],type:i},video:{children:["track","source"]},wbr:{type:i|f,void:!0}};function w(d){return e=>{P[e]={...d,...P[e]}}}["address","main","div","figure","p","pre"].forEach(w({content:i,type:i|v}));["abbr","b","bdi","bdo","cite","code","data","dfn","em","i","kbd","mark","q","ruby","samp","strong","sub","sup","time","u","var"].forEach(w({content:f,type:i|f|v}));["p","pre"].forEach(w({content:f,type:i|v}));["s","small","span","del","ins"].forEach(w({content:f,type:i|f}));["article","aside","footer","header","nav","section","blockquote"].forEach(w({content:i,type:i|C|v}));["h1","h2","h3","h4","h5","h6"].forEach(w({content:f,type:i|F|v}));["audio","canvas","iframe","img","video"].forEach(w({type:i|f|O|v}));const R=Object.freeze(P),Y=["applet","base","body","command","embed","frame","frameset","head","html","link","meta","noscript","object","script","style","title"],$=Object.keys(R).filter(d=>d!=="canvas"&&d!=="iframe"),c=1,z=2,k=3,L=4,H=5,D=Object.freeze({alt:c,cite:c,class:c,colspan:k,controls:L,datetime:c,default:L,disabled:L,dir:c,height:c,href:c,id:c,kind:c,label:c,lang:c,loading:c,loop:L,media:c,muted:L,poster:c,rel:c,role:c,rowspan:k,scope:c,sizes:c,span:k,start:k,style:H,src:c,srclang:c,srcset:c,tabindex:c,target:c,title:c,type:c,width:c}),G=Object.freeze({class:"className",colspan:"colSpan",datetime:"dateTime",rowspan:"rowSpan",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex"});function _(){return _=Object.assign||function(d){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(d[n]=t[n])}return d},_.apply(this,arguments)}function B({attributes:d={},className:e,children:t=null,selfClose:n=!1,tagName:r}){const s=r;return n?x.createElement(s,_({className:e},d)):x.createElement(s,_({className:e},d),t)}class V{attribute(e,t){return t}node(e,t){return t}}/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var U=/["'&<>]/,q=K;function K(d){var e=""+d,t=U.exec(e);if(!t)return e;var n,r="",s=0,o=0;for(s=t.index;s<e.length;s++){switch(e.charCodeAt(s)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}o!==s&&(r+=e.substring(o,s)),o=s+1,r+=n}return o!==s?r+e.substring(o,s):r}const X=M(q);function T(d,e,t){return e in d?Object.defineProperty(d,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):d[e]=t,d}const J=/(url|image|image-set)\(/i;class Q extends V{attribute(e,t){return e==="style"&&Object.keys(t).forEach(n=>{String(t[n]).match(J)&&delete t[n]}),t}}const j=1,Z=3,ee=/^<(!doctype|(html|head|body)(\s|>))/i,te=/^(aria-|data-|\w+:)/iu,ne=/{{{(\w+)\/?}}}/;function re(){if(!(typeof window>"u"||typeof document>"u"))return document.implementation.createHTMLDocument("Interweave")}class se{constructor(e,t={},n=[],r=[]){var s;T(this,"allowed",void 0),T(this,"banned",void 0),T(this,"blocked",void 0),T(this,"container",void 0),T(this,"content",[]),T(this,"props",void 0),T(this,"matchers",void 0),T(this,"filters",void 0),T(this,"keyIndex",void 0),this.props=t,this.matchers=n,this.filters=[...r,new Q],this.keyIndex=-1,this.container=this.createContainer(e||""),this.allowed=new Set((s=t.allowList)!==null&&s!==void 0?s:$),this.banned=new Set(Y),this.blocked=new Set(t.blockList)}applyAttributeFilters(e,t){return this.filters.reduce((n,r)=>n!==null&&typeof r.attribute=="function"?r.attribute(e,n):n,t)}applyNodeFilters(e,t){return this.filters.reduce((n,r)=>n!==null&&typeof r.node=="function"?r.node(e,n):n,t)}applyMatchers(e,t){const n={},{props:r}=this;let s=e,o=0,y=null;return this.matchers.forEach(a=>{const u=a.asTag().toLowerCase(),h=this.getTagConfig(u);if(r[a.inverseName]||!this.isTagAllowed(u)||!this.canRenderChild(t,h))return;let m="";for(;s&&(y=a.match(s));){const{index:l,length:p,match:b,valid:A,void:N,...E}=y,I=a.propName+String(o);l>0&&(m+=s.slice(0,l)),A?(m+=N?`{{{${I}/}}}`:`{{{${I}}}}${b}{{{/${I}}}}`,this.keyIndex+=1,o+=1,n[I]={children:b,matcher:a,props:{...r,...E,key:this.keyIndex}}):m+=b,a.greedy?(s=m+s.slice(l+p),m=""):s=s.slice(l+(p||b.length))}a.greedy||(s=m+s)}),o===0?e:this.replaceTokens(s,n)}canRenderChild(e,t){return!e.tagName||!t.tagName||e.void?!1:e.children.length>0?e.children.includes(t.tagName):e.invalid.length>0&&e.invalid.includes(t.tagName)?!1:t.parent.length>0?t.parent.includes(e.tagName):!e.self&&e.tagName===t.tagName?!1:!!(e&&e.content&t.type)}convertLineBreaks(e){const{noHtml:t,disableLineBreaks:n}=this.props;if(t||n||e.match(/<((?:\/[ a-z]+)|(?:[ a-z]+\/))>/gi))return e;let r=e.replace(/\r\n/g,`
`);return r=r.replace(/\n{3,}/g,`


`),r=r.replace(/\n/g,"<br/>"),r}createContainer(e){var t;const r=(typeof global<"u"&&global.INTERWEAVE_SSR_POLYFILL||re)();if(!r)return;const s=(t=this.props.containerTagName)!==null&&t!==void 0?t:"body",o=s==="body"||s==="fragment"?r.body:r.createElement(s);return e.match(ee)||(o.innerHTML=this.convertLineBreaks(this.props.escapeHtml?X(e):e)),o}extractAttributes(e){const{allowAttributes:t}=this.props,n={};let r=0;return e.nodeType!==j||!e.attributes||([...e.attributes].forEach(s=>{const{name:o,value:y}=s,a=o.toLowerCase(),u=D[a]||D[o];if(!this.isSafe(e)||!a.match(te)&&(!t&&(!u||u===z)||a.startsWith("on")||y.replace(/(\s|\0|&#x0([9AD]);)/,"").match(/(javascript|vbscript|livescript|xss):/i)))return;let h=a==="style"?this.extractStyleAttribute(e):y;u===L?h=!0:u===k?h=Number.parseFloat(String(h)):u!==H&&(h=String(h)),n[G[a]||a]=this.applyAttributeFilters(a,h),r+=1}),r===0)?null:n}extractStyleAttribute(e){const t={};return Array.from(e.style).forEach(n=>{const r=e.style[n];(typeof r=="string"||typeof r=="number")&&(t[n.replace(/-([a-z])/g,(s,o)=>String(o).toUpperCase())]=r)}),t}getTagConfig(e){const t={children:[],content:0,invalid:[],parent:[],self:!0,tagName:"",type:0,void:!1};return R[e]?{...t,...R[e],tagName:e}:t}isSafe(e){if(typeof HTMLAnchorElement<"u"&&e instanceof HTMLAnchorElement){const t=e.getAttribute("href");if(t!=null&&t.startsWith("#"))return!0;const n=e.protocol.toLowerCase();return n===":"||n==="http:"||n==="https:"||n==="mailto:"||n==="tel:"}return!0}isTagAllowed(e){return this.banned.has(e)||this.blocked.has(e)?!1:this.props.allowElements||this.allowed.has(e)}parse(){return this.container?this.parseNode(this.container,this.getTagConfig(this.container.nodeName.toLowerCase())):[]}parseNode(e,t){const{noHtml:n,noHtmlExceptMatchers:r,allowElements:s,transform:o,transformOnlyAllowList:y}=this.props;let a=[],u="";return[...e.childNodes].forEach(h=>{if(h.nodeType===j){const l=h.nodeName.toLowerCase(),p=this.getTagConfig(l);u&&(a.push(u),u="");const b=this.applyNodeFilters(l,h);if(!b)return;let A;if(o&&!(y&&!this.isTagAllowed(l))){this.keyIndex+=1;const N=this.keyIndex;A=this.parseNode(b,p);const E=o(b,A,p);if(E===null)return;if(typeof E<"u"){a.push(x.cloneElement(E,{key:N}));return}this.keyIndex=N-1}if(this.banned.has(l))return;if(!(n||r&&l!=="br")&&this.isTagAllowed(l)&&(s||this.canRenderChild(t,p))){var m;this.keyIndex+=1;const N=this.extractAttributes(b),E={tagName:l};N&&(E.attributes=N),p.void&&(E.selfClose=p.void),a.push(x.createElement(B,{...E,key:this.keyIndex},(m=A)!==null&&m!==void 0?m:this.parseNode(b,p)))}else a=[...a,...this.parseNode(b,p.tagName?p:t)]}else if(h.nodeType===Z){const l=n&&!r?h.textContent:this.applyMatchers(h.textContent||"",t);Array.isArray(l)?a=[...a,...l]:u+=l}}),u&&a.push(u),a}replaceTokens(e,t){if(!e.includes("{{{"))return e;const n=[];let r=e,s=null;for(;s=r.match(ne);){const[o,y]=s,a=s.index,u=o.includes("/");a>0&&(n.push(r.slice(0,a)),r=r.slice(a));const{children:h,matcher:m,props:l}=t[y];let p;if(u)p=o.length,n.push(m.createElement(h,l));else{const b=r.match(new RegExp(`{{{/${y}}}}`));p=b.index+b[0].length,n.push(m.createElement(this.replaceTokens(r.slice(o.length,b.index),t),l))}r=r.slice(p)}return r.length>0&&n.push(r),n.length===0?"":n.length===1&&typeof n[0]=="string"?n[0]:n}}function ae(d){var e;const{attributes:t,className:n,containerTagName:r,content:s,emptyContent:o,parsedContent:y,tagName:a,noWrap:u}=d,h=(e=r??a)!==null&&e!==void 0?e:"span",m=h==="fragment"?!0:u;let l;if(y)l=y;else{const p=new se(s??"",d).parse();p.length>0&&(l=p)}return l||(l=o),m?x.createElement(x.Fragment,null,l):x.createElement(B,{attributes:t,className:n,tagName:h},l)}const oe=d=>{const{handleCloseDialog:e,content:t}=d;return W.useEffect(()=>{const n=r=>{r.key==="Escape"&&e()};return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[e]),g.jsx("div",{className:"modal modal-xl fade show",style:{display:"block"},id:"previewDialog","aria-labelledby":"previewDialogLabel",role:"dialog","aria-hidden":!1,children:g.jsx("div",{className:"modal-dialog modal-dialog-scrollable",role:"document",children:g.jsxs("div",{className:"modal-content",children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h1",{className:"modal-title fs-5",id:"previewDialogLabel",children:"Preview"}),g.jsx("button",{type:"button",className:"close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e,children:g.jsx("span",{"aria-hidden":"true",children:"☓"})})]}),g.jsx("div",{className:"modal-body",style:{whiteSpace:"pre-line"},children:t.length>0&&g.jsx(ae,{content:t})}),g.jsx("div",{className:"modal-footer",children:g.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e,children:"Close"})})]})})})};export{oe as default};
